<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./src/output.css" />
  </head>

  <body>
    <div class="container mx-auto">
      <!-- Header -->
      <div class="gap-2 flex flex-col items-center mb-8 m-24">
        <h1 class="flex items-center text-5xl font-bold text-slate-700 mb-2">
          <span>
            <svg
              fill="#000000"
              height="54px"
              width="54px"
              version="1.1"
              id="Capa_1"
              xmlns="http://www.w3.org/2000/svg"
              xmlns:xlink="http://www.w3.org/1999/xlink"
              viewBox="0 0 476.801 476.801"
              xml:space="preserve"
              stroke="currentColor"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <path
                  d="M363.526,415.046V230.763c3.324-0.971,5.754-4.037,5.754-7.674c0-19.841-10.646-38.376-27.783-48.372l-39.828-23.231 c-10.404-6.069-16.868-17.323-16.868-29.369v-17.399h0.04c4.418,0,8-3.582,8-8V22.513C292.841,10.1,282.741,0,270.328,0h-63.855 C194.06,0,183.96,10.1,183.96,22.513v74.204c0,4.418,3.582,8,8,8H192v17.399c0,12.046-6.464,23.3-16.869,29.369l-39.827,23.231 c-17.137,9.996-27.783,28.531-27.783,48.372c0,3.637,2.43,6.703,5.754,7.674v184.283c-3.324,0.971-5.754,4.037-5.754,7.674v10.08 c0,24.262,19.738,44,44,44h173.76c24.262,0,44-19.738,44-44v-10.08C369.28,419.083,366.85,416.018,363.526,415.046z M199.96,88.717 V71.729h76.881v16.987h-0.04H200H199.96z M206.473,16h63.855c3.591,0,6.513,2.922,6.513,6.513v33.217H199.96V22.513 C199.96,18.922,202.882,16,206.473,16z M143.366,188.537l39.826-23.231C198.494,156.381,208,139.831,208,122.116v-17.399h60.801 v17.399c0,17.715,9.506,34.265,24.807,43.189l39.827,23.231c9.898,5.773,16.765,15.534,19.03,26.552h-11.664c-4.418,0-8,3.582-8,8 s3.582,8,8,8h6.726V273.5c-6.065-0.643-9.817-2.249-13.997-4.048c-6.155-2.648-13.132-5.651-26.397-5.651 s-20.242,3.003-26.397,5.651c-5.421,2.334-10.103,4.349-20.071,4.349c-9.967,0-14.648-2.015-20.068-4.349 c-6.154-2.648-13.13-5.651-26.395-5.651s-20.241,3.003-26.396,5.652c-5.42,2.333-10.102,4.348-20.068,4.348 s-14.648-2.015-20.068-4.349c-4.778-2.056-10.066-4.32-18.394-5.232v-33.131h160.326c4.418,0,8-3.582,8-8s-3.582-8-8-8H124.336 C126.602,204.071,133.468,194.311,143.366,188.537z M353.28,432.801c0,15.439-12.561,28-28,28h-173.76c-15.439,0-28-12.561-28-28 v-2.08h166.08c4.418,0,8-3.582,8-8s-3.582-8-8-8H129.274V280.343c4.974,0.753,8.347,2.204,12.067,3.806 c6.154,2.649,13.13,5.652,26.395,5.652s20.24-3.003,26.395-5.651c5.42-2.334,10.102-4.349,20.069-4.349 c9.967,0,14.648,2.015,20.068,4.349c6.154,2.648,13.13,5.651,26.395,5.651c13.266,0,20.242-3.003,26.397-5.651 c5.421-2.334,10.103-4.349,20.071-4.349s14.65,2.015,20.071,4.349c5.138,2.21,10.862,4.662,20.323,5.414v125.158h-6.726 c-4.418,0-8,3.582-8,8s3.582,8,8,8h12.479V432.801z"
                ></path>
              </g>
            </svg>
          </span>
          Galon Management System
        </h1>
        <p class="text-slate-700">
          Manage your water gallon business with ease
        </p>
      </div>

      <!-- Alert -->
      <div id="alert" class="mb-6"></div>

      <!-- Tabs -->
      <div class="flex gap-2 mb-0">
        <button
          onclick="switchTab('products')"
          class="tab-btn flex-1 text-cyan-700 font-bold py-4 px-6 rounded-t-2xl hover:bg-slate-200 transition-all active-tab"
        >
          <span></span> Products
        </button>
        <button
          onclick="switchTab('transactions')"
          class="tab-btn flex-1 bg-white/80 text-gray-700 font-bold py-4 px-6 rounded-t-2xl hover:bg-slate-200 transition-all"
        >
          <span></span> Transactions
        </button>
      </div>

      <!-- Content Card -->
      <div class="bg-slate-50 rounded-xl p-8">
        <!-- Products Section -->
        <div id="products" class="section">
          <h2 class="text-3xl font-bold text-gray-800 mb-6">Manage Products</h2>

          <form
            id="productForm"
            onsubmit="saveProduct(event)"
            class="bg-slate-100 p-6 rounded-xl mb-8 border border-blue-200"
          >
            <input type="hidden" id="productId" />

            <div class="flex md:flex-row items-center flex-col gap-6 mb-3">
              <!-- input text -->
              <div class="w-full max-w-sm min-w-[200px]">
                <div class="relative">
                  <input
                    type="text"
                    id="productName"
                    required
                    class="peer w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-500 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm"
                  />
                  <label
                    class="capitalize absolute cursor-text bg-slate-100 px-1 left-2.5 top-2.5 text-slate-600 text-sm transition-all transform origin-left peer-focus:-top-2 peer-focus:left-2.5 peer-focus:text-xs peer-focus:text-slate-400 peer-focus:scale-90"
                  >
                    add or edit
                  </label>
                </div>
              </div>

              <!-- input price or number -->
              <div class="w-full max-w-sm min-w-[200px]">
                <div class="relative">
                  <input
                    type="number"
                    id="productPrice"
                    required
                    class="peer w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-500 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow"
                  />
                  <label
                    class="capitalize absolute cursor-text bg-slate-100 px-1 left-2.5 top-2.5 text-slate-600 text-sm transition-all transform origin-left peer-focus:-top-2 peer-focus:left-2.5 peer-focus:text-xs peer-focus:text-slate-400 peer-focus:scale-90"
                  >
                    price
                  </label>
                </div>
              </div>
            </div>

            <div class="flex gap-3">
              <!-- add or edit button -->
              <button
                type="submit"
                id="productSubmitBtn"
                class="flex items-center gap-2 bg-blue-700 text-slate-200 text-sm md:text-md font-bold py-3 px-8 rounded-lg hover:from-blue-600 hover:to-purple-700 transform hover:scale-105 transition-all shadow-lg"
              >
                <span>
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    id="Plus-Circle--Streamline-Iconoir"
                    height="24"
                    width="24"
                  >
                    <desc>
                      Plus Circle Streamline Icon: https://streamlinehq.com
                    </desc>
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12c0 5.9371 4.81294 10.75 10.75 10.75 5.9371 0 10.75 -4.8129 10.75 -10.75 0 -5.93706 -4.8129 -10.75 -10.75 -10.75ZM12.75 8c0 -0.41421 -0.3358 -0.75 -0.75 -0.75s-0.75 0.33579 -0.75 0.75v3.25H8c-0.41421 0 -0.75 0.3358 -0.75 0.75s0.33579 0.75 0.75 0.75h3.25V16c0 0.4142 0.3358 0.75 0.75 0.75s0.75 -0.3358 0.75 -0.75v-3.25H16c0.4142 0 0.75 -0.3358 0.75 -0.75s-0.3358 -0.75 -0.75 -0.75h-3.25V8Z"
                      fill="currentColor"
                      stroke-width="1"
                    ></path>
                  </svg>
                </span>
                Add Product
              </button>

              <!-- cancel button -->
              <button
                type="button"
                onclick="resetProductForm()"
                class="flex items-center gap-2 bg-red-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-red-600 transition-all"
              >
                <span>
                  <svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    id="Xmark-Circle--Streamline-Iconoir"
                    height="24"
                    width="24"
                  >
                    <desc>
                      Xmark Circle Streamline Icon: https://streamlinehq.com
                    </desc>
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12c0 5.9371 4.81294 10.75 10.75 10.75 5.9371 0 10.75 -4.8129 10.75 -10.75 0 -5.93706 -4.8129 -10.75 -10.75 -10.75ZM9.70164 8.64124c-0.29289 -0.29289 -0.76776 -0.29289 -1.06066 0 -0.29289 0.2929 -0.29289 0.76777 0 1.06066L10.9391 12l-2.29812 2.2981c-0.29289 0.2929 -0.29289 0.7678 0 1.0607 0.2929 0.2929 0.76777 0.2929 1.06066 0l2.29806 -2.2981 2.2981 2.2981c0.2929 0.2929 0.7678 0.2929 1.0607 0 0.2929 -0.2929 0.2929 -0.7678 0 -1.0607L13.0604 12l2.2981 -2.2981c0.2929 -0.29289 0.2929 -0.76776 0 -1.06066 -0.2929 -0.29289 -0.7678 -0.29289 -1.0607 0l-2.2981 2.29806 -2.29806 -2.29806Z"
                      fill="currentColor"
                      stroke-width="1"
                    ></path>
                  </svg>
                </span>
                Cancel
              </button>
            </div>
          </form>

          <!-- Products Table -->
          <div class="overflow-x-auto rounded-xl border-2 border-gray-200">
            <table class="w-full">
              <thead class="bg-blue-800 text-white">
                <tr>
                  <th class="px-6 py-4 text-left font-bold">ID</th>
                  <th class="px-6 py-4 text-left font-bold">Name</th>
                  <th class="px-6 py-4 text-left font-bold">Price (Rp)</th>
                  <th class="px-6 py-4 text-left font-bold">Actions</th>
                </tr>
              </thead>
              <tbody
                id="productsTable"
                class="divide-y divide-gray-200"
              ></tbody>
            </table>
          </div>
        </div>

        <!-- diff section -->
        <!-- Transactions Section -->
        <div id="transactions" class="section hidden">
          <h2 class="text-3xl font-bold text-gray-800 mb-6">
            Manage Transactions
          </h2>

          <!-- Total Revenue Box -->
          <div
            class="bg-linear-65 from-blue-500 to-blue-700 text-white p-8 rounded-2xl mb-8 shadow-xl"
          >
            <div class="flex items-center justify-between">
              <div>
                <p class="flex items-center gap-2 text-xl opacity-90 mb-2">
                  <span
                    ><svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      height="24"
                      width="24"
                    >
                      <g id="Money-Stack">
                        <path
                          id="Vector"
                          fill="currentColor"
                          d="M19 22H5v-2h14zm1 -4H4v-2h16zm0 -16c0.5523 0 1 0.44772 1 1v10c0 0.5523 -0.4477 1 -1 1H4c-0.55228 0 -1 -0.4477 -1 -1V3c0 -0.55228 0.44772 -1 1 -1zM7.43457 4c0.04123 0.15999 0.06543 0.32714 0.06543 0.5 0 1.10457 -0.89543 2 -2 2 -0.17295 0 -0.33994 -0.02514 -0.5 -0.06641v3.13184C5.15999 9.5242 5.32714 9.5 5.5 9.5c1.10457 0 2 0.8954 2 2 0 0.1729 -0.0242 0.34 -0.06543 0.5h9.13083c-0.0412 -0.16 -0.0654 -0.3271 -0.0654 -0.5 0 -1.1046 0.8954 -2 2 -2 0.1729 0 0.34 0.0242 0.5 0.06543V6.43359c-0.1601 0.04127 -0.3271 0.06641 -0.5 0.06641 -1.1046 0 -2 -0.89543 -2 -2 0 -0.17286 0.0242 -0.34001 0.0654 -0.5zM12 5c1.6569 0 3 1.34315 3 3s-1.3431 3 -3 3 -3 -1.34315 -3 -3 1.3431 -3 3 -3"
                          stroke-width="1"
                        ></path>
                      </g></svg
                  ></span>
                  Total Revenue
                </p>
                <p class="text-5xl font-bold" id="totalRevenue">Rp 0</p>
              </div>
            </div>
          </div>

          <form
            id="transactionForm"
            onsubmit="saveTransaction(event)"
            class="flex flex-col bg-sky-100 p-6 rounded-xl mb-8 border border-blue-200"
          >
            <input type="hidden" id="transactionId" />

            <div class="flex flex-col mb-6 gap-2 items-center md:flex-row">
              <div>
                <select
                  id="transactionProduct"
                  required
                  class="peer w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-500 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow"
                >
                  <option value="">-- Select Product --</option>
                </select>
              </div>

              <!-- input quantity -->
              <div class="w-full max-w-sm min-w-[200px]">
                <div class="relative">
                  <input
                    type="number"
                    id="transactionQuantity"
                    required
                    min="1"
                    class="peer w-full bg-transparent placeholder:text-slate-400 text-slate-700 text-sm border border-slate-500 rounded-md px-3 py-2 transition duration-300 ease focus:outline-none focus:border-slate-400 hover:border-slate-300 shadow-sm focus:shadow"
                  />
                  <label
                    class="capitalize absolute cursor-text bg-sky-100 px-1 left-2.5 top-2.5 text-slate-600 text-sm transition-all transform origin-left peer-focus:-top-2 peer-focus:left-2.5 peer-focus:text-xs peer-focus:text-slate-400 peer-focus:scale-90"
                  >
                    jumlah
                  </label>
                </div>
              </div>
              <!-- <div>
                <label class="block text-gray-700 font-semibold mb-2"
                  >Quantity</label
                >
                <input
                  type="number"
                  id="transactionQuantity"
                  required
                  placeholder="e.g., 5"
                  min="1"
                  class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-purple-500 transition-all"
                />
              </div> -->
            </div>

            <div class="flex gap-3">
              <button
                type="submit"
                id="transactionSubmitBtn"
                class="flex items-center gap-2 bg-sky-500 text-blue-100 font-bold py-3 px-8 rounded-lg transform hover:scale-105 transition-all shadow-lg"
              >
                <span
                  ><svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    id="Plus-Circle--Streamline-Iconoir"
                    height="24"
                    width="24"
                  >
                    <desc>
                      Plus Circle Streamline Icon: https://streamlinehq.com
                    </desc>
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12c0 5.9371 4.81294 10.75 10.75 10.75 5.9371 0 10.75 -4.8129 10.75 -10.75 0 -5.93706 -4.8129 -10.75 -10.75 -10.75ZM12.75 8c0 -0.41421 -0.3358 -0.75 -0.75 -0.75s-0.75 0.33579 -0.75 0.75v3.25H8c-0.41421 0 -0.75 0.3358 -0.75 0.75s0.33579 0.75 0.75 0.75h3.25V16c0 0.4142 0.3358 0.75 0.75 0.75s0.75 -0.3358 0.75 -0.75v-3.25H16c0.4142 0 0.75 -0.3358 0.75 -0.75s-0.3358 -0.75 -0.75 -0.75h-3.25V8Z"
                      fill="currentColor"
                      stroke-width="1"
                    ></path></svg
                ></span>
                Add Transaction
              </button>
              <button
                type="button"
                onclick="resetTransactionForm()"
                class="flex items-center gap-2 bg-red-500 text-white font-bold py-3 px-8 rounded-lg hover:bg-red-600 transition-all"
              >
                <span
                  ><svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    id="Xmark-Circle--Streamline-Iconoir"
                    height="24"
                    width="24"
                  >
                    <desc>
                      Xmark Circle Streamline Icon: https://streamlinehq.com
                    </desc>
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12c0 5.9371 4.81294 10.75 10.75 10.75 5.9371 0 10.75 -4.8129 10.75 -10.75 0 -5.93706 -4.8129 -10.75 -10.75 -10.75ZM9.70164 8.64124c-0.29289 -0.29289 -0.76776 -0.29289 -1.06066 0 -0.29289 0.2929 -0.29289 0.76777 0 1.06066L10.9391 12l-2.29812 2.2981c-0.29289 0.2929 -0.29289 0.7678 0 1.0607 0.2929 0.2929 0.76777 0.2929 1.06066 0l2.29806 -2.2981 2.2981 2.2981c0.2929 0.2929 0.7678 0.2929 1.0607 0 0.2929 -0.2929 0.2929 -0.7678 0 -1.0607L13.0604 12l2.2981 -2.2981c0.2929 -0.29289 0.2929 -0.76776 0 -1.06066 -0.2929 -0.29289 -0.7678 -0.29289 -1.0607 0l-2.2981 2.29806 -2.29806 -2.29806Z"
                      fill="currentColor"
                      stroke-width="1"
                    ></path></svg
                ></span>
                Cancel
              </button>
            </div>
          </form>

          <!-- Transactions Table -->
          <div class="overflow-x-auto rounded-xl border-2 border-gray-200">
            <table class="w-full">
              <thead class="bg-linear-165 from-sky-600 to-blue-600 text-white">
                <tr>
                  <th class="px-6 py-4 text-left font-bold">ID</th>
                  <th class="px-6 py-4 text-left font-bold">Product</th>
                  <th class="px-6 py-4 text-left font-bold">Quantity</th>
                  <th class="px-6 py-4 text-left font-bold">Price</th>
                  <th class="px-6 py-4 text-left font-bold">Total</th>
                  <th class="px-6 py-4 text-left font-bold">Actions</th>
                </tr>
              </thead>
              <tbody
                id="transactionsTable"
                class="divide-y divide-gray-200"
              ></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script>
      const API_URL = "http://localhost/restapi/api.php";

      function switchTab(tab) {
        document.querySelectorAll(".tab-btn").forEach((btn) => {
          btn.classList.remove("active-tab", "bg-white", "text-purple-600");
          btn.classList.add("bg-white/80", "text-gray-700");
        });
        document.querySelectorAll(".section").forEach((section) => {
          section.classList.add("hidden");
        });

        event.target.classList.add(
          "active-tab",
          "bg-slate-100",
          "text-cyan-700"
        );
        event.target.classList.remove("bg-white/80", "text-gray-700");
        document.getElementById(tab).classList.remove("hidden");

        if (tab === "products") {
          loadProducts();
        } else {
          loadTransactions();
          loadProductsForSelect();
        }
      }

      // Show alert message
      function showAlert(message, type = "success") {
        const alertDiv = document.getElementById("alert");
        const bgColor =
          type === "success"
            ? "bg-green-100 border-green-400 text-green-700"
            : "bg-red-100 border-red-400 text-red-700";
        alertDiv.innerHTML = `
                <div class="${bgColor} flex items-center gap-2 border-2 px-6 py-4 rounded-xl font-semibold shadow-lg animate-pulse">
                    ${
                      type === "success"
                        ? `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14" id="Check--Streamline-Core" height="14" width="14">
  <desc>
    Check Streamline Icon: https://streamlinehq.com
  </desc>
  <g id="check--check-form-validation-checkmark-success-add-addition-tick">
    <path id="Vector (Stroke)" fill="currentColor" fill-rule="evenodd" d="M13.637 1.198a1 1 0 0 1 0.134 1.408l-8.04 9.73 -0.003 0.002a1.922 1.922 0 0 1 -1.5 0.693 1.923 1.923 0 0 1 -1.499 -0.748l-0.001 -0.002L0.21 9.045a1 1 0 1 1 1.578 -1.228l2.464 3.167 7.976 -9.652a1 1 0 0 1 1.408 -0.134Z" clip-rule="evenodd" stroke-width="1"></path>
  </g>
</svg>`
                        : "‚ùå"
                    } ${message}
                </div>
            `;
        setTimeout(() => (alertDiv.innerHTML = ""), 3000);
      }

      // ========== PRODUCTS ==========
      async function loadProducts() {
        try {
          const res = await fetch(`${API_URL}?endpoint=products`);
          const products = await res.json();
          const tbody = document.getElementById("productsTable");

          if (products.length === 0) {
            tbody.innerHTML =
              '<tr><td colspan="4" class="px-6 py-8 text-center text-gray-500">No products found</td></tr>';
            return;
          }

          tbody.innerHTML = products
            .map(
              (p, i) => `
                    <tr class="hover:bg-blue-50 transition-all ${
                      i % 2 === 0 ? "bg-gray-50" : "bg-white"
                    }">
                        <td class="px-6 py-4 font-semibold text-xs md:text-base text-gray-700">${
                          p.id
                        }</td>
                        <td class="px-6 py-4 font-medium text-xs md:text-base text-gray-800 capitalize">${
                          p.name
                        }</td>
                        <td class="px-6 py-4 text-sky-600 text-xs md:text-base font-bold">Rp ${parseFloat(
                          p.price
                        ).toLocaleString("id-ID")}</td>
                        <td class="px-6 py-4 flex ">
                            <button onclick="editProduct(${
                              p.id
                            })" class="flex items-center gap-2 bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-all mr-2 font-semibold">
                                <span><svg version="1.1" id="Edit--Streamline-Carbon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="0 0 16 16" xml:space="preserve" enable-background="new 0 0 32 32" height="16" width="16">
  <desc>
    Edit Streamline Icon: https://streamlinehq.com
  </desc>
  <title>edit</title>
  <path d="M1 13h14v1H1Z" fill="currentColor" stroke-width="0.5"></path>
  <path d="M12.7 4.5c0.4 -0.4 0.4 -1 0 -1.4l-1.8 -1.8c-0.4 -0.4 -1 -0.4 -1.4 0l-7.5 7.5V12h3.2l7.5 -7.5zm-2.5 -2.5L12 3.8l-1.5 1.5L8.7 3.5l1.5 -1.5zM3 11v-1.8l5 -5 1.8 1.8 -5 5H3z" fill="currentColor" stroke-width="0.5"></path>
  <path id="_Transparent_Rectangle_" d="M0 0h16v16H0Z" fill="none" stroke-width="0.5"></path>
</svg></span> 
<span class="text-xs md:text-base">

  Edit
</span>
                            </button>
                            <button onclick="deleteProduct(${
                              p.id
                            })" class=" flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-all font-semibold">
                                <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" id="Trash-X--Streamline-Tabler-Filled" height="24" width="24">
  <desc>
    Trash X Streamline Icon: https://streamlinehq.com
  </desc>
  <path d="M20 6a1 1 0 0 1 0.117 1.993L20 8h-0.081L19 19a3 3 0 0 1 -2.824 2.995L16 22H8c-1.598 0 -2.904 -1.249 -2.992 -2.75l-0.005 -0.167L4.08 8H4a1 1 0 0 1 -0.117 -1.993L4 6h16zm-9.489 5.14a1 1 0 0 0 -1.218 1.567L10.585 14l-1.292 1.293 -0.083 0.094a1 1 0 0 0 1.497 1.32L12 15.415l1.293 1.292 0.094 0.083a1 1 0 0 0 1.32 -1.497L13.415 14l1.292 -1.293 0.083 -0.094a1 1 0 0 0 -1.497 -1.32L12 12.585l-1.293 -1.292 -0.094 -0.083z" stroke-width="1"></path>
  <path d="M14 2a2 2 0 0 1 2 2 1 1 0 0 1 -1.993 0.117L14 4h-4l-0.007 0.117A1 1 0 0 1 8 4a2 2 0 0 1 1.85 -1.995L10 2h4z" stroke-width="1"></path>
</svg></span> <span class="text-xs md:text-base">

  Delete
</span> 
                            </button>
                        </td>
                    </tr>
                `
            )
            .join("");
        } catch (err) {
          console.log(err);
          showAlert("failed to load products", "error");
        }
      }

      // add products function to send
      async function saveProduct(e) {
        e.preventDefault();

        const id = document.getElementById("productId").value;
        const name = document.getElementById("productName").value;
        const price = document.getElementById("productPrice").value;

        try {
          const url = id
            ? `${API_URL}?endpoint=products&id=${id}`
            : `${API_URL}?endpoint=products`;

          //  using post or put method as URL by ternary operator
          const method = id ? "PUT" : "POST";

          //fetching data using json API control in js method to php method encode
          const res = await fetch(url, {
            method: method,
            headers: { "Content-Type": "application/json" },

            // remind : this is the data went through out
            body: JSON.stringify({
              name, // name of the products
              price, // price of the products
            }),
          });

          //  waiting response from method PHP to send what the data is send or not
          const data = await res.json();

          //  triggering the php file to send the response data json message using json
          showAlert(data.message);

          //  function for clearing the form
          resetProductForm();

          //  function to reload the product that have been added after execute
          loadProducts();
        } catch (err) {
          showAlert("Failed to save product", "error");
        }
      }

      // edit products
      async function editProduct(id) {
        try {
          const res = await fetch(`${API_URL}?endpoint=products&id=${id}`);
          const product = await res.json();

          document.getElementById("productId").value = product.id;
          document.getElementById("productName").value = product.name;
          document.getElementById("productPrice").value = product.price;
          document.getElementById(
            "productSubmitBtn"
          ).innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Save--Streamline-Rounded-Material" height="24" width="24">
  <desc>
    Save Streamline Icon: https://streamlinehq.com
  </desc>
  <path fill="currentColor" d="M4.5 21c-0.4 0 -0.75 -0.15 -1.05 -0.45 -0.3 -0.3 -0.45 -0.65 -0.45 -1.05V4.5c0 -0.4 0.15 -0.75 0.45 -1.05C3.75 3.15 4.1 3 4.5 3h11.95c0.20735 0 0.405 0.041665 0.593 0.125 0.188 0.083335 0.34865 0.191665 0.482 0.325l3.025 3.025c0.13335 0.13335 0.24165 0.294 0.325 0.482 0.08335 0.188 0.125 0.38565 0.125 0.593V19.5c0 0.4 -0.15 0.75 -0.45 1.05 -0.3 0.3 -0.65 0.45 -1.05 0.45H4.5Zm15 -13.4L16.4 4.5H4.5v15h15V7.6ZM11.994 17.875c0.72065 0 1.33515 -0.25215 1.8435 -0.7565 0.50835 -0.5045 0.7625 -1.117 0.7625 -1.8375 0 -0.72065 -0.25215 -1.33515 -0.7565 -1.8435 -0.5045 -0.50835 -1.117 -0.7625 -1.8375 -0.7625 -0.72065 0 -1.33515 0.25215 -1.8435 0.7565 -0.50835 0.5045 -0.7625 1.117 -0.7625 1.8375 0 0.72065 0.25215 1.33515 0.7565 1.8435 0.5045 0.50835 1.117 0.7625 1.8375 0.7625ZM6.575 9.4h7.45c0.2125 0 0.39065 -0.0719 0.5345 -0.21575 0.14365 -0.14365 0.2155 -0.32175 0.2155 -0.53425v-2.075c0 -0.2125 -0.07185 -0.39065 -0.2155 -0.5345 -0.14385 -0.14365 -0.322 -0.2155 -0.5345 -0.2155h-7.45c-0.2125 0 -0.3906 0.07185 -0.53425 0.2155 -0.14385 0.14385 -0.21575 0.322 -0.21575 0.5345v2.075c0 0.2125 0.0719 0.3906 0.21575 0.53425 0.14365 0.14385 0.32175 0.21575 0.53425 0.21575ZM4.5 7.6V19.5v3.1Z" stroke-width="0.5"></path>
</svg> Update Product`;
          window.scrollTo(0, 0);
        } catch (err) {
          showAlert("Failed to load product", "error");
        }
      }

      // delete products
      async function deleteProduct(id) {
        // loop for asking the data will deleted, while cancel while returning the data
        if (!confirm("Are you sure you want to delete this product?")) return;

        // the logic for deleting the data using the ID to sent it to PHP method
        try {
          const res = await fetch(`${API_URL}?endpoint=products&id=${id}`, {
            // method in php will trigger this
            method: "DELETE",
          });
          //  same function like before
          const data = await res.json();
          showAlert(data.message);
          loadProducts();
        } catch (err) {
          // this allert will appear if the data unable to delete due error or something wrong
          showAlert("Failed to delete product", "error");
        }
      }

      // reset products form
      function resetProductForm() {
        document.getElementById("productForm").reset();
        document.getElementById("productId").value = "";
        document.getElementById("productSubmitBtn").innerHTML = `<svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    id="Plus-Circle--Streamline-Iconoir"
                    height="24"
                    width="24"
                  >
                    <desc>
                      Plus Circle Streamline Icon: https://streamlinehq.com
                    </desc>
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12c0 5.9371 4.81294 10.75 10.75 10.75 5.9371 0 10.75 -4.8129 10.75 -10.75 0 -5.93706 -4.8129 -10.75 -10.75 -10.75ZM12.75 8c0 -0.41421 -0.3358 -0.75 -0.75 -0.75s-0.75 0.33579 -0.75 0.75v3.25H8c-0.41421 0 -0.75 0.3358 -0.75 0.75s0.33579 0.75 0.75 0.75h3.25V16c0 0.4142 0.3358 0.75 0.75 0.75s0.75 -0.3358 0.75 -0.75v-3.25H16c0.4142 0 0.75 -0.3358 0.75 -0.75s-0.3358 -0.75 -0.75 -0.75h-3.25V8Z"
                      fill="currentColor"
                      stroke-width="1"
                    ></path></svg
                > Add Product`;
      }

      // ========== TRANSACTIONS ==========
      async function loadProductsForSelect() {
        try {
          const res = await fetch(`${API_URL}?endpoint=products`);
          const products = await res.json();
          const select = document.getElementById("transactionProduct");

          select.innerHTML =
            '<option value="">-- Select Product --</option>' +
            products
              .map(
                (p) =>
                  `<option value="${p.id}">${p.name} - Rp ${parseFloat(
                    p.price
                  ).toLocaleString("id-ID")}</option>`
              )
              .join("");
        } catch (err) {
          showAlert("Failed to load products", "error");
        }
      }

      async function loadTransactions() {
        try {
          const res = await fetch(`${API_URL}?endpoint=transactions`);
          const transactions = await res.json();
          const tbody = document.getElementById("transactionsTable");

          if (transactions.length === 0) {
            tbody.innerHTML =
              '<tr><td colspan="6" class="px-6 py-8 text-center text-gray-500">No transactions found</td></tr>';
            document.getElementById("totalRevenue").textContent = "Rp 0";
            return;
          }

          let totalRevenue = 0;
          tbody.innerHTML = transactions
            .map((t, i) => {
              const total = t.quantity * parseFloat(t.product_price || 0);
              totalRevenue += total;
              return `
                        <tr class="hover:bg-green-50 transition-all ${
                          i % 2 === 0 ? "bg-gray-50" : "bg-white"
                        }">
                            <td class="px-6 py-4 font-semibold text-gray-700">${
                              t.id
                            }</td>
                            <td class="px-6 py-4 font-medium text-gray-800">${
                              t.product_name || "N/A"
                            }</td>
                            <td class="px-6 py-4 text-blue-600 font-bold">${
                              t.quantity
                            }x</td>
                            <td class="px-6 py-4 text-gray-600">Rp ${parseFloat(
                              t.product_price || 0
                            ).toLocaleString("id-ID")}</td>
                            <td class="px-6 py-4 text-green-600 font-bold text-lg">Rp ${total.toLocaleString(
                              "id-ID"
                            )}</td>
                            <td class="px-6 py-4 flex items-center">
                                <button onclick="editTransaction(${
                                  t.id
                                })" class=" flex items-center gap-2 bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 transition-all mr-2 font-semibold">
                                    <span><svg version="1.1" id="Edit--Streamline-Carbon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0" y="0" viewBox="0 0 16 16" xml:space="preserve" enable-background="new 0 0 32 32" height="16" width="16">
  <desc>
    Edit Streamline Icon: https://streamlinehq.com
  </desc>
  <title>edit</title>
  <path d="M1 13h14v1H1Z" fill="currentColor" stroke-width="0.5"></path>
  <path d="M12.7 4.5c0.4 -0.4 0.4 -1 0 -1.4l-1.8 -1.8c-0.4 -0.4 -1 -0.4 -1.4 0l-7.5 7.5V12h3.2l7.5 -7.5zm-2.5 -2.5L12 3.8l-1.5 1.5L8.7 3.5l1.5 -1.5zM3 11v-1.8l5 -5 1.8 1.8 -5 5H3z" fill="currentColor" stroke-width="0.5"></path>
  <path id="_Transparent_Rectangle_" d="M0 0h16v16H0Z" fill="none" stroke-width="0.5"></path>
</svg></span> Edit
                                </button>
                                <button onclick="deleteTransaction(${
                                  t.id
                                })" class="flex items-center gap-2 bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-all font-semibold">
                                    <span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" id="Trash-X--Streamline-Tabler-Filled" height="24" width="24">
  <desc>
    Trash X Streamline Icon: https://streamlinehq.com
  </desc>
  <path d="M20 6a1 1 0 0 1 0.117 1.993L20 8h-0.081L19 19a3 3 0 0 1 -2.824 2.995L16 22H8c-1.598 0 -2.904 -1.249 -2.992 -2.75l-0.005 -0.167L4.08 8H4a1 1 0 0 1 -0.117 -1.993L4 6h16zm-9.489 5.14a1 1 0 0 0 -1.218 1.567L10.585 14l-1.292 1.293 -0.083 0.094a1 1 0 0 0 1.497 1.32L12 15.415l1.293 1.292 0.094 0.083a1 1 0 0 0 1.32 -1.497L13.415 14l1.292 -1.293 0.083 -0.094a1 1 0 0 0 -1.497 -1.32L12 12.585l-1.293 -1.292 -0.094 -0.083z" stroke-width="1"></path>
  <path d="M14 2a2 2 0 0 1 2 2 1 1 0 0 1 -1.993 0.117L14 4h-4l-0.007 0.117A1 1 0 0 1 8 4a2 2 0 0 1 1.85 -1.995L10 2h4z" stroke-width="1"></path>
</svg></span> Delete
                                </button>
                            </td>
                        </tr>
                    `;
            })
            .join("");

          document.getElementById(
            "totalRevenue"
          ).textContent = `Rp ${totalRevenue.toLocaleString("id-ID")}`;
        } catch (err) {
          showAlert("Failed to load transactions", "error");
        }
      }

      async function saveTransaction(e) {
        e.preventDefault();
        const id = document.getElementById("transactionId").value;
        const product_id = document.getElementById("transactionProduct").value;
        const quantity = document.getElementById("transactionQuantity").value;

        try {
          const url = id
            ? `${API_URL}?endpoint=transactions&id=${id}`
            : `${API_URL}?endpoint=transactions`;
          const method = id ? "PUT" : "POST";

          const res = await fetch(url, {
            method: method,
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ product_id, quantity }),
          });

          const data = await res.json();
          showAlert(data.message);
          resetTransactionForm();
          loadTransactions();
        } catch (err) {
          showAlert("Failed to save transaction", "error");
        }
      }

      async function editTransaction(id) {
        try {
          const res = await fetch(`${API_URL}?endpoint=transactions&id=${id}`);
          const transaction = await res.json();

          document.getElementById("transactionId").value = transaction.id;
          document.getElementById("transactionProduct").value =
            transaction.product_id;
          document.getElementById("transactionQuantity").value =
            transaction.quantity;
          document.getElementById(
            "transactionSubmitBtn"
          ).innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" id="Save--Streamline-Rounded-Material" height="24" width="24">
  <desc>
    Save Streamline Icon: https://streamlinehq.com
  </desc>
  <path fill="currentColor" d="M4.5 21c-0.4 0 -0.75 -0.15 -1.05 -0.45 -0.3 -0.3 -0.45 -0.65 -0.45 -1.05V4.5c0 -0.4 0.15 -0.75 0.45 -1.05C3.75 3.15 4.1 3 4.5 3h11.95c0.20735 0 0.405 0.041665 0.593 0.125 0.188 0.083335 0.34865 0.191665 0.482 0.325l3.025 3.025c0.13335 0.13335 0.24165 0.294 0.325 0.482 0.08335 0.188 0.125 0.38565 0.125 0.593V19.5c0 0.4 -0.15 0.75 -0.45 1.05 -0.3 0.3 -0.65 0.45 -1.05 0.45H4.5Zm15 -13.4L16.4 4.5H4.5v15h15V7.6ZM11.994 17.875c0.72065 0 1.33515 -0.25215 1.8435 -0.7565 0.50835 -0.5045 0.7625 -1.117 0.7625 -1.8375 0 -0.72065 -0.25215 -1.33515 -0.7565 -1.8435 -0.5045 -0.50835 -1.117 -0.7625 -1.8375 -0.7625 -0.72065 0 -1.33515 0.25215 -1.8435 0.7565 -0.50835 0.5045 -0.7625 1.117 -0.7625 1.8375 0 0.72065 0.25215 1.33515 0.7565 1.8435 0.5045 0.50835 1.117 0.7625 1.8375 0.7625ZM6.575 9.4h7.45c0.2125 0 0.39065 -0.0719 0.5345 -0.21575 0.14365 -0.14365 0.2155 -0.32175 0.2155 -0.53425v-2.075c0 -0.2125 -0.07185 -0.39065 -0.2155 -0.5345 -0.14385 -0.14365 -0.322 -0.2155 -0.5345 -0.2155h-7.45c-0.2125 0 -0.3906 0.07185 -0.53425 0.2155 -0.14385 0.14385 -0.21575 0.322 -0.21575 0.5345v2.075c0 0.2125 0.0719 0.3906 0.21575 0.53425 0.14365 0.14385 0.32175 0.21575 0.53425 0.21575ZM4.5 7.6V19.5v3.1Z" stroke-width="0.5"></path>
</svg> Update Transaction`;
          window.scrollTo(0, 0);
        } catch (err) {
          showAlert("Failed to load transaction", "error");
        }
      }

      async function deleteTransaction(id) {
        if (!confirm("Are you sure you want to delete this transaction?"))
          return;

        try {
          const res = await fetch(`${API_URL}?endpoint=transactions&id=${id}`, {
            method: "DELETE",
          });
          const data = await res.json();
          showAlert(data.message);
          loadTransactions();
        } catch (err) {
          showAlert("Failed to delete transaction", "error");
        }
      }

      function resetTransactionForm() {
        document.getElementById("transactionForm").reset();
        document.getElementById("transactionId").value = "";
        document.getElementById("transactionSubmitBtn").innerHTML = `<svg
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                    id="Plus-Circle--Streamline-Iconoir"
                    height="24"
                    width="24"
                  >
                    <desc>
                      Plus Circle Streamline Icon: https://streamlinehq.com
                    </desc>
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12c0 5.9371 4.81294 10.75 10.75 10.75 5.9371 0 10.75 -4.8129 10.75 -10.75 0 -5.93706 -4.8129 -10.75 -10.75 -10.75ZM12.75 8c0 -0.41421 -0.3358 -0.75 -0.75 -0.75s-0.75 0.33579 -0.75 0.75v3.25H8c-0.41421 0 -0.75 0.3358 -0.75 0.75s0.33579 0.75 0.75 0.75h3.25V16c0 0.4142 0.3358 0.75 0.75 0.75s0.75 -0.3358 0.75 -0.75v-3.25H16c0.4142 0 0.75 -0.3358 0.75 -0.75s-0.3358 -0.75 -0.75 -0.75h-3.25V8Z"
                      fill="currentColor"
                      stroke-width="1"
                    ></path></svg
                > Add Transaction`;
      }

      // Load initial data
      loadProducts();
    </script>
  </body>
</html>
